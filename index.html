<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Monster Ecology Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Monster Ecology Explorer</h1>
    <p>
      Use the controls below to explore how D&amp;D monsters are distributed
      across environments, types, and sizes – and how their stats and movement
      abilities change with challenge rating.
    </p>
    <p class="note">
      This is a prototype: design and interactions are still being refined.
    </p>
  </header>

  <main>
    <section id="explorer-section">
      <h2>Explore monsters by group and metric</h2>

      <div id="controls" class="controls-panel">
        <div class="control-group">
          <label for="dimension-select">Group by</label>
          <select id="dimension-select">
            <option value="environment">Environment</option>
            <option value="type">Monster type</option>
            <option value="size">Size</option>
          </select>
        </div>

        <div class="control-group">
          <label for="metric-select">Metric</label>
          <select id="metric-select">
            <option value="count">Number of monsters</option>
            <option value="avgCR">Average CR</option>
            <option value="avgHP">Average HP</option>
            <option value="avgAC">Average AC</option>
            <option value="pctFly">% that can fly</option>
            <option value="pctSwim">% that can swim</option>
          </select>
        </div>

        <div class="control-group cr-group">
          <label>CR range</label>
          <div class="cr-inputs">
            <input type="number" id="cr-min" step="0.25" />
            <span>to</span>
            <input type="number" id="cr-max" step="0.25" />
          </div>
          <small id="cr-range-note"></small>
        </div>

        <div class="control-group toggles-group">
          <label>Movement filters</label>
          <div class="checkbox-row">
            <label>
              <input type="checkbox" id="fly-filter" />
              Only monsters that can fly
            </label>
          </div>
          <div class="checkbox-row">
            <label>
              <input type="checkbox" id="swim-filter" />
              Only monsters that can swim
            </label>
          </div>
        </div>
      </div>

      <p id="explorer-caption" class="caption">
        Each bar shows the <strong>number of monsters</strong> in each
        <strong>environment</strong>, filtered by the CR range and movement
        options above. Change the options to see how the picture shifts.
      </p>

      <div id="explorer-chart" class="chart-container"></div>
      <p id="explorer-summary" class="summary-text">
        Loading data…
      </p>
    </section>

    <!-- Optional: placeholder for a second view you might build later -->
    <section id="future-section">
      <h2>Coming next: traits vs challenge rating</h2>
      <p>
        In the final version, this section will add a linked scatterplot showing
        how hit points, armor class, and ability scores scale with CR. It will
        respond to the same CR sliders and movement filters as the main chart.
      </p>
      <div class="chart-placeholder">
        Prototype placeholder: stats vs CR scatterplot.
      </div>
    </section>
  </main>

  <footer>
    <p>
      Data: Open5e monsters, cleaned into <code>monsters_ecology.csv</code>.
      Built with D3.js.
    </p>
  </footer>

  <div id="tooltip" class="tooltip" style="opacity:0;"></div>

  <script src="main.js"></script>
</body>
</html>
